<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 850" font-family="Arial" font-size="14">
    <style>
        .box-core { stroke: #868e96; stroke-width: 2; fill: #e9ecef; }
        .box-app { stroke: #868e96; stroke-width: 2; fill: #d0bfff; }
        .box-infra { stroke: #868e96; stroke-width: 2; fill: #c3fae8; }
        .box-monitor { stroke: #868e96; stroke-width: 2; fill: #ffc078; }
        .box-ext { stroke: #868e96; stroke-width: 2; fill: #74c0fc; }

        .vps-border { stroke: #868e96; stroke-width: 2; fill: none; stroke-dasharray: 5,5; } /* Dashed border for VPS group */

        .arrow { stroke: #868e96; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
    </style>
    <defs>
        <marker id="arrowhead" viewBox="0 0 10 10" refX="10" refY="5" orient="auto" markerUnits="strokeWidth">
            <path d="M 0 0 L 10 5 L 0 10 z" fill="#868e96"/>
        </marker>
    </defs>

    <!-- Background -->
    <rect width="1000" height="850" fill="#f8f9fa" />

    <text x="500" y="30" text-anchor="middle" font-size="24" font-weight="bold">Monorepo Architecture</text>

    <!-- Developer -->
    <g id="developer-group" transform="translate(50, 50)">
        <rect id="developer" width="150" height="60" class="box-core" />
        <text x="75" y="35" text-anchor="middle">Developer</text>
    </g>

    <!-- CI/CD Pipeline -->
    <g id="cicd-group" transform="translate(250, 50)">
        <rect id="cicd" width="150" height="60" class="box-core" />
        <text x="75" y="35" text-anchor="middle">CI/CD Pipeline</text>
    </g>

    <!-- VPS Server Border -->
    <rect id="vps-border" x="450" y="30" width="500" height="770" class="vps-border" rx="10" ry="10"/>
    <text x="500" y="60" text-anchor="start" font-size="16" font-weight="bold">  VPS Server</text>


    <!-- VPS Server - Base Services Group -->
    <g id="vps-base-services-group" transform="translate(470, 100)">
        <text x="0" y="0" text-anchor="start" font-size="14" font-weight="bold">  Base Services</text>

        <!-- Nginx -->
        <g id="nginx-group">
            <rect id="nginx" x="0" y="20" width="150" height="60" class="box-infra" />
            <text x="75" y="55" text-anchor="middle">Nginx</text>
        </g>

        <!-- PgBouncer (Single - for Option 1) -->
        <g id="pgbouncer-group" transform="translate(0, 100)">
            <rect id="pgbouncer" width="150" height="60" class="box-infra" />
            <text x="75" y="35" text-anchor="middle">PgBouncer</text>
        </g>

        <!-- PostgreSQL DB (Single - for Option 1) -->
        <g id="db-group" transform="translate(0, 200)">
            <rect id="db" width="150" height="60" class="box-infra" />
            <text x="75" y="35" text-anchor="middle">PostgreSQL DB</text>
            <text x="75" y="55" text-anchor="middle">(Single Instance)</text>
        </g>

        <!-- RabbitMQ (Single) -->
        <g id="rabbitmq-group" transform="translate(200, 20)">
            <rect id="rabbitmq" width="150" height="60" class="box-infra" />
            <text x="75" y="35" text-anchor="middle">RabbitMQ</text>
            <text x="75" y="55" text-anchor="middle">(Single Instance)</text>
        </g>

        <!-- Monitor App -->
        <g id="monitorapp-group" transform="translate(200, 100)">
            <rect id="monitorapp" width="150" height="60" class="box-monitor" />
            <text x="75" y="35" text-anchor="middle">Monitor App</text>
        </g>

        <!-- Certbot -->
        <g id="certbot-group" transform="translate(200, 200)">
            <rect id="certbot" width="150" height="60" class="box-monitor" />
            <text x="75" y="35" text-anchor="middle">Certbot</text>
        </g>
    </g>


    <!-- Container Registry -->
    <g id="registry-group" transform="translate(250, 750)">
        <rect id="registry" width="150" height="60" class="box-ext" />
        <text x="75" y="35" text-anchor="middle">Container Registry</text>
    </g>

    <!-- Docker Engine -->
    <g id="docker-group" transform="translate(500, 250)">
        <rect id="docker" width="150" height="60" class="box-infra" />
        <text x="75" y="35" text-anchor="middle">Docker Engine</text>
    </g>

    <!-- Project Apps (Combined) -->
    <g id="apps-group" transform="translate(500, 350)">
        <rect id="apps" width="300" height="80" class="box-app" />
        <text x="150" y="45" text-anchor="middle">Project Apps</text>
        <text x="150" y="65" text-anchor="middle">(Project 1, 2, 3, Monitor, WordPress, ...)</text>
    </g>

    <!-- WordPress MySQL/MariaDB -->
    <g id="wordpress-db-group" transform="translate(700, 350)">
        <rect id="wordpress-db" width="150" height="60" class="box-infra" />
        <text x="75" y="35" text-anchor="middle">MySQL/MariaDB</text>
        <text x="75" y="55" text-anchor="middle">(WordPress DB)</text>
    </g>


    <!-- Arrows -->
    <path class="arrow" d="M200 80 L250 80" /> <!-- Developer to CI/CD -->
    <path class="arrow" d="M400 80 L500 80" /> <!-- CI/CD to VPS -->
    <path class="arrow" d="M325 110 L325 750" /> <!-- CI/CD to Registry -->
    <path class="arrow" d="M575 150 L575 110" /> <!-- Nginx to VPS -->
    <path class="arrow" d="M575 250 L575 210" /> <!-- Docker to Nginx -->
    <path class="arrow" d="M650 350 L575 480" /> <!-- Apps to PgBouncer -->
    <path class="arrow" d="M575 480 L575 580" /> <!-- PgBouncer to DB -->
    <path class="arrow" d="M575 580 L575 700" /> <!-- DB to RabbitMQ -->
    <path class="arrow" d="M775 350 L775 310" /> <!-- WordPress Apps to Docker (implicitly) -->
    <path class="arrow" d="M775 350 L875 380" /> <!-- WordPress Apps to MySQL -->


</svg>
