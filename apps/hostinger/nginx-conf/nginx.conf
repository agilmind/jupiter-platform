# Configuraci칩n principal de Nginx - Se monta en /etc/nginx/nginx.conf

user nginx;
# worker_processes auto; # Comentado - La imagen base puede manejar esto
pid /var/run/nginx.pid;
# include /etc/nginx/modules-enabled/*.conf; # Comentado - La imagen base maneja esto

events {
    worker_connections 768;
    # multi_accept on;
}

http {
    # --- Basic Settings ---
    sendfile on;
    tcp_nopush on;
    tcp_nodelay on;
    keepalive_timeout 65;
    types_hash_max_size 2048;
    server_tokens off; # Ocultar versi칩n Nginx

    include /etc/nginx/mime.types;
    default_type application/octet-stream;

    # --- Logging Settings (stdout/stderr para Docker) ---
    access_log /dev/stdout;
    error_log /dev/stderr warn; # Log desde nivel warning

    # --- Gzip Settings (Opcional) ---
    # gzip on;
    # ...

    # --- MAP para WebSockets (Corrige error "unknown connection_upgrade") ---
    map $http_upgrade $connection_upgrade {
        default upgrade;
        ''      close;
    }
    # --- FIN MAP ---

    # --- Incluir Configuraciones de Sitios ---
    # Incluye nuestro default.conf (y cualquier otro .conf en ese directorio)
    include /etc/nginx/conf.d/*.conf;
}

# Opcional: A침adir 'daemon off;' si no est치 en la imagen base para correr en foreground
# daemon off; # Generalmente gestionado por la imagen de Docker
